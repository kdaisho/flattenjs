<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>flattenJs</title>
</head>
<body>
<script src="data.js"></script>
<script>

function flatten (src) {
    const bigarr = [];
    let accum = {};
    let count = 0;

    function cleaner (arr) {
        return arr.filter((obj, index) => {
            return index % 2 !== 0;
        });
    }

	function recursion (s, acc) {
		let includes = false;
        let lastlist = {};

		s.forEach(function (obj) {
            count++;
            console.log('count & obj', count, obj);
			for (let prop in obj) {
                includes = false;
                console.log('first inner', obj);
				if (Array.isArray(obj[prop])) {
                    includes = true;
                    console.log('insertion', obj[prop]);
                    lastlist[prop] = obj[prop];
                    // delete obj[prop];
					console.log(lastlist);
				}
				else {
                    acc[prop] = obj[prop];
                    // delete obj[prop];
                    includes = false;
				}
			}
			if (includes) {
                includes = false;
				for (let p in lastlist) {
                    console.log(lastlist[p]);
                    // if (Array.isArray(lastlist[p])) {
                        recursion(lastlist[p], accum);
                    // }
                }
			}
			else {
                includes = false;
                console.log('saving', acc);
                bigarr.push({...acc});
			}
		});
		return bigarr;
	}

    return cleaner(recursion(src, accum));
    // return recursion(src, accum);

}

console.log(flatten(data));
//take out index 1 and last index

//const output = flatten(data);
</script>
</body>
</html>